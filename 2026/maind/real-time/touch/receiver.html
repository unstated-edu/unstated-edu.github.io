<!doctype html>
<html>
  <head>
    <title>Receiver</title>
    <style>
      #box {
        width: 100px;
        height: 100px;
        background: black;
        margin-bottom: 5px;
        transition:
          width 0.1s,
          height 0.1s;
      }
    </style>
  </head>
  <body>
    <div id="box"></div>
    <div id="info">Waiting for phone...</div>

    <script src="https://cdn.ably.com/lib/ably.min-2.js"></script>
    <script>
      var API_KEY = "biplaQ.iovzWA:ffx3oR9mKYBjDAfLiHlVJ4KWacO_9mEU6KOocxicrKY";
      var client = new Ably.Realtime(API_KEY);
      var channel = client.channels.get("pinch");

      var box = document.getElementById("box");
      var info = document.getElementById("info");

      channel.subscribe("pinch", function (msg) {
        var distance = msg.data.distance;

        info.textContent = "distance: " + distance + "px";

        // map distance (0-400) to box size (50-400)
        var size = map(distance, 0, 400, 50, 400);
        box.style.width = size + "px";
        box.style.height = size + "px";
      });

      function map(value, inMin, inMax, outMin, outMax) {
        return ((value - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;
      }
    </script>
  </body>
</html>
